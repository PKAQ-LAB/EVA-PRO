(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8529],{34540:function(re,N,r){"use strict";var $=r(22122),b=r(28991),U=r(81253),j=r(86190),x=r(67294),p=r(66758),V=r(72793),J=["fieldProps","proFieldProps"],K="dateRange",w=x.forwardRef(function(W,y){var B=W.fieldProps,Z=W.proFieldProps,l=(0,U.Z)(W,J),n=(0,x.useContext)(p.Z);return x.createElement(V.Z,(0,$.Z)({ref:y,mode:"edit",fieldProps:(0,b.Z)({getPopupContainer:n.getPopupContainer},B),valueType:K,proFieldProps:Z,filedConfig:{valueType:K,lightFilterLabelFormatter:function(m){return(0,j.Z)(m,(B==null?void 0:B.format)||"YYYY-MM-DD")}}},l))});N.Z=w},64317:function(re,N,r){"use strict";var $=r(22122),b=r(28991),U=r(81253),j=r(22270),x=r(67294),p=r(66758),V=r(72793),J=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],K=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],w=x.forwardRef(function(l,n){var I=l.fieldProps,m=l.children,Y=l.params,te=l.proFieldProps,k=l.mode,q=l.valueEnum,ne=l.request,ae=l.showSearch,_=l.options,le=(0,U.Z)(l,J),oe=(0,x.useContext)(p.Z);return x.createElement(V.Z,(0,$.Z)({mode:"edit",valueEnum:(0,j.h)(q),request:ne,params:Y,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,b.Z)({options:_,mode:k,showSearch:ae,getPopupContainer:oe.getPopupContainer},I),ref:n,proFieldProps:te},le),m)}),W=x.forwardRef(function(l,n){var I=l.fieldProps,m=l.children,Y=l.params,te=l.proFieldProps,k=l.mode,q=l.valueEnum,ne=l.request,ae=l.options,_=(0,U.Z)(l,K),le=(0,b.Z)({options:ae,mode:k||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},I),oe=(0,x.useContext)(p.Z);return x.createElement(V.Z,(0,$.Z)({mode:"edit",valueEnum:(0,j.h)(q),request:ne,params:Y,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,b.Z)({getPopupContainer:oe.getPopupContainer},le),ref:n,proFieldProps:te},_),m)}),y=w,B=W,Z=y;Z.SearchSelect=B,Z.displayName="ProFormComponent",N.Z=Z},5966:function(re,N,r){"use strict";var $=r(22122),b=r(81253),U=r(67294),j=r(72793),x=["fieldProps","proFieldProps"],p=["fieldProps","proFieldProps"],V="text",J=function(y){var B=y.fieldProps,Z=y.proFieldProps,l=(0,b.Z)(y,x);return U.createElement(j.Z,(0,$.Z)({mode:"edit",valueType:V,fieldProps:B,filedConfig:{valueType:V},proFieldProps:Z},l))},K=function(y){var B=y.fieldProps,Z=y.proFieldProps,l=(0,b.Z)(y,p);return U.createElement(j.Z,(0,$.Z)({mode:"edit",valueType:"password",fieldProps:B,proFieldProps:Z,filedConfig:{valueType:V}},l))},w=J;w.Password=K,w.displayName="ProFormComponent",N.Z=w},5393:function(re){re.exports={card:"card___1dsH6",errorIcon:"errorIcon___3jptF",anticon:"anticon___A0Hdx",errorPopover:"errorPopover___FGjVx",errorListItem:"errorListItem___1rmVg",errorField:"errorField___2Y7eW",editable:"editable___WRDur"}},79969:function(re,N,r){"use strict";r.r(N),r.d(N,{default:function(){return _e}});var $=r(58024),b=r(39144),U=r(13062),j=r(71230),x=r(89032),p=r(15746),V=r(34792),J=r(48086),K=r(3182),w=r(20136),W=r(55241),y=r(2824),B=r(94043),Z=r.n(B),l=r(73218),n=r(67294),I=r(22122),m=r(28991),Y=r(81253),te=r(86190),k=r(66758),q=r(72793),ne=["fieldProps","proFieldProps"],ae=["fieldProps","proFieldProps"],_="time",le=n.forwardRef(function(e,c){var C=e.fieldProps,g=e.proFieldProps,M=(0,Y.Z)(e,ne),G=(0,n.useContext)(k.Z);return n.createElement(q.Z,(0,I.Z)({ref:c,mode:"edit",fieldProps:(0,m.Z)({getPopupContainer:G.getPopupContainer},C),valueType:"timeRange",proFieldProps:g,filedConfig:{valueType:"timeRange",lightFilterLabelFormatter:function(A){return(0,te.Z)(A,"HH:mm:SS")}}},M))}),oe=function(c){var C=c.fieldProps,g=c.proFieldProps,M=(0,Y.Z)(c,ae),G=(0,n.useContext)(k.Z);return n.createElement(q.Z,(0,I.Z)({mode:"edit",fieldProps:(0,m.Z)({getPopupContainer:G.getPopupContainer},C),valueType:_,proFieldProps:g,filedConfig:{customLightMode:!0,valueType:_}},M))},pe=oe;pe.RangePicker=le;var De=pe,he=r(952),de=r(5966),ee=r(64317),be=r(34540),mr=r(9715),je=r(86835),cr=r(57663),Be=r(71577),Me=r(96156),Ie=r(28481),Pe=r(55507),Ae=r(92137),Oe=r(49101),Le=r(97462),Se=r(26369),ge=r(22270),Ve=r(48171),Ke=r(60249),We=r(48526),Ne=r(21770),$e=r(88306),Ee=r(8880),Ue=r(47888),we=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],Ye=["record","position","creatorButtonText","newRecordType","parentKey","style"],Fe=n.createContext(void 0);function Ze(e){var c=e.children,C=e.record,g=e.position,M=e.newRecordType,G=e.parentKey,L=(0,n.useContext)(Fe);return n.cloneElement(c,(0,m.Z)((0,m.Z)({},c.props),{},{onClick:function(){var A=(0,Ae.Z)((0,Pe.Z)().mark(function O(T){var F,S,u,E;return(0,Pe.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(F=(S=c.props).onClick)===null||F===void 0?void 0:F.call(S,T);case 2:if(E=D.sent,E!==!1){D.next=5;break}return D.abrupt("return");case 5:L==null||(u=L.current)===null||u===void 0||u.addEditRecord(C,{position:g,newRecordType:M,parentKey:G});case 6:case"end":return D.stop()}},O)}));function ue(O){return A.apply(this,arguments)}return ue}()}))}function Ce(e){var c,C,g=e.onTableChange,M=e.maxLength,G=e.formItemProps,L=e.recordCreatorProps,A=e.rowKey,ue=e.controlled,O=e.defaultValue,T=e.onChange,F=e.editableFormRef,S=(0,Y.Z)(e,we),u=(0,Se.Z)(e.value),E=(0,n.useRef)(),v=(0,n.useRef)();(0,n.useImperativeHandle)(S.actionRef,function(){return E.current});var D=(0,Ne.Z)(function(){return e.value||O||[]},{value:e.value,onChange:e.onChange}),ye=(0,Ie.Z)(D,2),s=ye[0],er=ye[1],z=n.useMemo(function(){return typeof A=="function"?A:function(f,a){return f[A]||a}},[A]),Re=function(a){if(typeof a=="number"&&!e.name){if(a>=s.length)return a;var i=s==null?void 0:s.at(a);return z==null?void 0:z(i,a)}if((typeof a=="string"||a>=s.length)&&e.name){var o=s.findIndex(function(d,h){var P;return(z==null||(P=z(d,h))===null||P===void 0?void 0:P.toString())===(a==null?void 0:a.toString())});return o}return a};(0,n.useImperativeHandle)(F,function(){var f=function(o){var d,h;if(o==null)throw new Error("rowIndex is required");var P=Re(o),X=[e.name,(d=P==null?void 0:P.toString())!==null&&d!==void 0?d:""].flat(1).filter(Boolean);return(h=v.current)===null||h===void 0?void 0:h.getFieldValue(X)},a=function(){var o,d=[e.name].flat(1).filter(Boolean);if(Array.isArray(d)&&d.length===0){var h,P=(h=v.current)===null||h===void 0?void 0:h.getFieldsValue();return Array.isArray(P)?P:Object.keys(P).map(function(X){return P[X]})}return(o=v.current)===null||o===void 0?void 0:o.getFieldValue(d)};return(0,m.Z)((0,m.Z)({},v.current),{},{getRowData:f,getRowsData:a,setRowData:function(o,d){var h,P,X,ce;if(o==null)throw new Error("rowIndex is required");var fe=Re(o),ur=[e.name,(h=fe==null?void 0:fe.toString())!==null&&h!==void 0?h:""].flat(1).filter(Boolean),sr=((P=v.current)===null||P===void 0||(X=P.getFieldsValue)===null||X===void 0?void 0:X.call(P))||{},vr=(0,Ee.Z)(sr,ur,(0,m.Z)((0,m.Z)({},f(o)),d||{}));return(ce=v.current)===null||ce===void 0?void 0:ce.setFieldsValue(vr)}})}),(0,n.useEffect)(function(){!e.controlled||s.forEach(function(f,a){var i;(i=v.current)===null||i===void 0||i.setFieldsValue((0,Me.Z)({},z(f,a),f))},{})},[s,e.controlled]),(0,n.useEffect)(function(){if(e.name){var f;v.current=e==null||(f=e.editable)===null||f===void 0?void 0:f.form}},[(c=e.editable)===null||c===void 0?void 0:c.form,e.name]);var Q=L||{},rr=Q.record,ve=Q.position,tr=Q.creatorButtonText,nr=Q.newRecordType,ar=Q.parentKey,lr=Q.style,or=(0,Y.Z)(Q,Ye),Te=ve==="top",ie=(0,n.useMemo)(function(){return M&&M<=(s==null?void 0:s.length)?!1:L!==!1&&n.createElement(Ze,{record:(0,ge.h)(rr,s==null?void 0:s.length,s)||{},position:ve,parentKey:(0,ge.h)(ar,s==null?void 0:s.length,s),newRecordType:nr},n.createElement(Be.Z,(0,I.Z)({type:"dashed",style:(0,m.Z)({display:"block",margin:"10px 0",width:"100%"},lr),icon:n.createElement(Oe.Z,null)},or),tr||"\u6DFB\u52A0\u4E00\u884C\u6570\u636E"))},[L,M,s==null?void 0:s.length]),ir=(0,n.useMemo)(function(){return ie?Te?{components:{header:{wrapper:function(a){var i,o=a.className,d=a.children;return n.createElement("thead",{className:o},d,n.createElement("tr",{style:{position:"relative"}},n.createElement("td",{colSpan:0,style:{visibility:"hidden"}},ie),n.createElement("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(i=S.columns)===null||i===void 0?void 0:i.length},ie)))}}}}:{tableViewRender:function(a,i){var o,d;return n.createElement(n.Fragment,null,(o=(d=e.tableViewRender)===null||d===void 0?void 0:d.call(e,a,i))!==null&&o!==void 0?o:i,ie)}}:{}},[Te,ie]),me=(0,m.Z)({},e.editable),dr=(0,Ve.J)(function(f,a){var i,o,d;if((i=e.editable)===null||i===void 0||(o=i.onValuesChange)===null||o===void 0||o.call(i,f,a),(d=e.onValuesChange)===null||d===void 0||d.call(e,a,f),e.controlled){var h;e==null||(h=e.onChange)===null||h===void 0||h.call(e,a)}});return((e==null?void 0:e.onValuesChange)||((C=e.editable)===null||C===void 0?void 0:C.onValuesChange)||e.controlled&&(e==null?void 0:e.onChange))&&(me.onValuesChange=dr),n.createElement(n.Fragment,null,n.createElement(Fe.Provider,{value:E},n.createElement(Ue.Z,(0,I.Z)({search:!1,options:!1,pagination:!1,rowKey:A,revalidateOnFocus:!1},S,ir,{tableLayout:"fixed",actionRef:E,onChange:g,editable:(0,m.Z)((0,m.Z)({},me),{},{formProps:(0,m.Z)({formRef:v},me.formProps)}),dataSource:s,onDataSourceChange:function(a){if(er(a),e.name&&ve==="top"){var i,o=(0,Ee.Z)({},[e.name].flat(1).filter(Boolean),a);(i=v.current)===null||i===void 0||i.setFieldsValue(o)}}}))),e.name?n.createElement(Le.Z,{name:[e.name]},function(f){var a,i,o=(0,$e.Z)(f,[e.name].flat(1)),d=o==null?void 0:o.find(function(h,P){return!(0,Ke.Z)(h,u==null?void 0:u[P])});return d&&(e==null||(a=e.editable)===null||a===void 0||(i=a.onValuesChange)===null||i===void 0||i.call(a,d,o)),null}):null)}function xe(e){return e.name?n.createElement(je.Z.Item,(0,I.Z)({style:{maxWidth:"100%"}},e==null?void 0:e.formItemProps,{name:e.name}),n.createElement(We.gN,{shouldUpdate:!0,name:e.name,isList:!0},function(c,C,g){return n.createElement(Ce,(0,I.Z)({},e,{editable:(0,m.Z)((0,m.Z)({},e.editable),{},{form:g}),value:c.value||[],onChange:c.onChange}))})):n.createElement(Ce,e)}xe.RecordCreator=Ze;var He=xe,Ge=r(85224),Je=r(75362),ze=r(25377);function Qe(e){return se.apply(this,arguments)}function se(){return se=(0,K.Z)(Z().mark(function e(c){return Z().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,ze.WY)("/api/advancedForm",{method:"POST",data:c}));case 1:case"end":return g.stop()}},e)})),se.apply(this,arguments)}var Xe=r(5393),H=r.n(Xe),t=r(85893),R={name:"\u4ED3\u5E93\u540D",url:"\u4ED3\u5E93\u57DF\u540D",owner:"\u4ED3\u5E93\u7BA1\u7406\u5458",approver:"\u5BA1\u6279\u4EBA",dateRange:"\u751F\u6548\u65E5\u671F",type:"\u4ED3\u5E93\u7C7B\u578B",name2:"\u4EFB\u52A1\u540D",url2:"\u4EFB\u52A1\u63CF\u8FF0",owner2:"\u6267\u884C\u4EBA",approver2:"\u8D23\u4EFB\u4EBA",dateRange2:"\u751F\u6548\u65E5\u671F",type2:"\u4EFB\u52A1\u7C7B\u578B"},ke=[{key:"1",workId:"00001",name:"John Brown",department:"New York No. 1 Lake Park"},{key:"2",workId:"00002",name:"Jim Green",department:"London No. 1 Lake Park"},{key:"3",workId:"00003",name:"Joe Black",department:"Sidney No. 1 Lake Park"}],qe=function(){var c=(0,n.useState)([]),C=(0,y.Z)(c,2),g=C[0],M=C[1],G=function(T){var F=T.filter(function(E){return E.errors.length>0}).length;if(!T||F===0)return null;var S=function(v){var D=document.querySelector('label[for="'.concat(v,'"]'));D&&D.scrollIntoView(!0)},u=T.map(function(E){if(!E||E.errors.length===0)return null;var v=E.name[0];return(0,t.jsxs)("li",{className:H().errorListItem,onClick:function(){return S(v)},children:[(0,t.jsx)(l.Z,{className:H().errorIcon}),(0,t.jsx)("div",{className:H().errorMessage,children:E.errors[0]}),(0,t.jsx)("div",{className:H().errorField,children:R[v]})]},v)});return(0,t.jsxs)("span",{className:H().errorIcon,children:[(0,t.jsx)(W.Z,{title:"\u8868\u5355\u6821\u9A8C\u4FE1\u606F",content:u,overlayClassName:H().errorPopover,trigger:"click",getPopupContainer:function(v){return v&&v.parentNode?v.parentNode:v},children:(0,t.jsx)(l.Z,{})}),F]})},L=function(){var O=(0,K.Z)(Z().mark(function T(F){return Z().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return M([]),u.prev=1,u.next=4,Qe(F);case 4:J.ZP.success("\u63D0\u4EA4\u6210\u529F"),u.next=9;break;case 7:u.prev=7,u.t0=u.catch(1);case 9:case"end":return u.stop()}},T,null,[[1,7]])}));return function(F){return O.apply(this,arguments)}}(),A=function(T){M(T.errorFields)},ue=[{title:"\u6210\u5458\u59D3\u540D",dataIndex:"name",key:"name",width:"20%"},{title:"\u5DE5\u53F7",dataIndex:"workId",key:"workId",width:"20%"},{title:"\u6240\u5C5E\u90E8\u95E8",dataIndex:"department",key:"department",width:"40%"},{title:"\u64CD\u4F5C",key:"action",valueType:"option",render:function(T,F,S,u){return[(0,t.jsx)("a",{onClick:function(){u==null||u.startEditable(F.key)},children:"\u7F16\u8F91"},"eidit")]}}];return(0,t.jsx)(he.ZP,{layout:"vertical",hideRequiredMark:!0,submitter:{render:function(T,F){return(0,t.jsxs)(Ge.Z,{children:[G(g),F]})}},initialValues:{members:ke},onFinish:L,onFinishFailed:A,children:(0,t.jsxs)(Je.ZP,{content:"\u9AD8\u7EA7\u8868\u5355\u5E38\u89C1\u4E8E\u4E00\u6B21\u6027\u8F93\u5165\u548C\u63D0\u4EA4\u5927\u6279\u91CF\u6570\u636E\u7684\u573A\u666F\u3002",children:[(0,t.jsxs)(b.Z,{title:"\u4ED3\u5E93\u7BA1\u7406",className:H().card,bordered:!1,children:[(0,t.jsxs)(j.Z,{gutter:16,children:[(0,t.jsx)(p.Z,{lg:6,md:12,sm:24,children:(0,t.jsx)(de.Z,{label:R.name,name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4ED3\u5E93\u540D\u79F0"}],placeholder:"\u8BF7\u8F93\u5165\u4ED3\u5E93\u540D\u79F0"})}),(0,t.jsx)(p.Z,{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,children:(0,t.jsx)(de.Z,{label:R.url,name:"url",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}],fieldProps:{style:{width:"100%"},addonBefore:"http://",addonAfter:".com"},placeholder:"\u8BF7\u8F93\u5165"})}),(0,t.jsx)(p.Z,{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,children:(0,t.jsx)(ee.Z,{label:R.owner,name:"owner",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458"}],options:[{label:"\u4ED8\u6653\u6653",value:"xiao"},{label:"\u5468\u6BDB\u6BDB",value:"mao"}],placeholder:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458"})})]}),(0,t.jsxs)(j.Z,{gutter:16,children:[(0,t.jsx)(p.Z,{lg:6,md:12,sm:24,children:(0,t.jsx)(ee.Z,{label:R.approver,name:"approver",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5BA1\u6279\u5458"}],options:[{label:"\u4ED8\u6653\u6653",value:"xiao"},{label:"\u5468\u6BDB\u6BDB",value:"mao"}],placeholder:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458"})}),(0,t.jsx)(p.Z,{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,children:(0,t.jsx)(be.Z,{label:R.dateRange,name:"dateRange",fieldProps:{style:{width:"100%"}},rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u751F\u6548\u65E5\u671F"}]})}),(0,t.jsx)(p.Z,{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,children:(0,t.jsx)(ee.Z,{label:R.type,name:"type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u7C7B\u578B"}],options:[{label:"\u79C1\u5BC6",value:"private"},{label:"\u516C\u5F00",value:"public"}],placeholder:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u7C7B\u578B"})})]})]}),(0,t.jsxs)(b.Z,{title:"\u4EFB\u52A1\u7BA1\u7406",className:H().card,bordered:!1,children:[(0,t.jsxs)(j.Z,{gutter:16,children:[(0,t.jsx)(p.Z,{lg:6,md:12,sm:24,children:(0,t.jsx)(de.Z,{label:R.name2,name:"name2",rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}]})}),(0,t.jsx)(p.Z,{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,children:(0,t.jsx)(de.Z,{label:R.url2,name:"url2",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]})}),(0,t.jsx)(p.Z,{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,children:(0,t.jsx)(ee.Z,{label:R.owner2,name:"owner2",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458"}],options:[{label:"\u4ED8\u6653\u6653",value:"xiao"},{label:"\u5468\u6BDB\u6BDB",value:"mao"}]})})]}),(0,t.jsxs)(j.Z,{gutter:16,children:[(0,t.jsx)(p.Z,{lg:6,md:12,sm:24,children:(0,t.jsx)(ee.Z,{label:R.approver2,name:"approver2",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5BA1\u6279\u5458"}],options:[{label:"\u4ED8\u6653\u6653",value:"xiao"},{label:"\u5468\u6BDB\u6BDB",value:"mao"}],placeholder:"\u8BF7\u9009\u62E9\u5BA1\u6279\u5458"})}),(0,t.jsx)(p.Z,{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,children:(0,t.jsx)(De,{label:R.dateRange2,name:"dateRange2",rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}],placeholder:"\u63D0\u9192\u65F6\u95F4",fieldProps:{style:{width:"100%"}}})}),(0,t.jsx)(p.Z,{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,children:(0,t.jsx)(ee.Z,{label:R.type2,name:"type2",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u7C7B\u578B"}],options:[{label:"\u79C1\u5BC6",value:"private"},{label:"\u516C\u5F00",value:"public"}],placeholder:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u7C7B\u578B"})})]})]}),(0,t.jsx)(b.Z,{title:"\u6210\u5458\u7BA1\u7406",bordered:!1,children:(0,t.jsx)(he.ZP.Item,{name:"members",children:(0,t.jsx)(He,{recordCreatorProps:{record:function(){return{key:"0".concat(Date.now())}}},columns:ue,rowKey:"key"})})})]})})},_e=qe}}]);
